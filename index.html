<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹</title>
<link rel="stylesheet" href="style.css">
<style>
body { font-family: Tahoma, sans-serif; margin:0; padding:0; }
.news-slider { display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; }
.news-card { border:1px solid #ccc; padding:10px; border-radius:5px; width:200px; }
.news-card img { width:100%; height:auto; margin-bottom:5px; }
</style>
</head>
<body>

<header>
  <img src="assets/logo2.png" alt="Left Logo" class="logo-left">
  <img src="assets/logo1.png" alt="Right Logo" class="logo-right">
  <h1>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹</h1>
  <p>Ù…Ù†ØµØ© Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ù‡Ø¨ ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</p>
</header>

<nav>
  <a href="talents.html">Ø§Ù„Ù…ÙˆØ§Ù‡Ø¨</a>
  <a href="parents.html">Ù‡Ù…Ø³Ø§Øª Ù„ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</a>
  <a href="rules.html">Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù„Ø§Ø¦Ø­Ø©</a>
  <a href="library.html">Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</a>
  <a href="achievements.html">Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</a>
</nav>

<section class="main-bg">
  <div class="overlay">
    <div class="intro">
      <h2>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹</h2>
    </div>

    <h2>ğŸ“° Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h2>
    <div class="news-slider" id="newsContainer"></div>
  </div>
</section>

<footer>
<p>Â© 2025 Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
</footer>

<script>
const NEWS_KEY = "bawabatalibda3_news";
const newsContainer = document.getElementById("newsContainer");

let newsData = JSON.parse(localStorage.getItem(NEWS_KEY) || "[]");

// Render news
function renderNews() {
  newsContainer.innerHTML = "";
  newsData.forEach(news => {
    const card = document.createElement("div");
    card.className = "news-card";

    let imgTag = news.image ? `<img src="${news.image}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¨Ø±">` : "";
    card.innerHTML = `${imgTag}<h3>${news.title}</h3><p>${news.content}</p>`;
    newsContainer.appendChild(card);
  });
}

function saveNews() {
  localStorage.setItem(NEWS_KEY, JSON.stringify(newsData));
}

// Example of adding news programmatically
// newsData.push({title:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±", content:"Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø¨Ø±", image:"assets/news1.jpg"});
// saveNews();
// renderNews();

renderNews();
</script>

<!-- Firebase Module -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";
import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-storage.js";

const firebaseConfig = {
  apiKey: "AIzaSyDVxMQoTpXZH4GhqlXA7W3LKmQAlF78Vp8",
  authDomain: "alebdaa3-934f1.firebaseapp.com",
  projectId: "alebdaa3-934f1",
  storageBucket: "alebdaa3-934f1.appspot.com",
  messagingSenderId: "847563462029",
  appId: "1:847563462029:web:0938bbc4677cdfe44899c4"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const storage = getStorage(app);

// Real-time news update
document.addEventListener("DOMContentLoaded", () => {
  onSnapshot(collection(db,"news"), snapshot => {
    snapshot.forEach(async doc => {
      const data = doc.data();
      const exists = Array.from(newsContainer.children).some(c => c.querySelector('h3')?.textContent === data.title);
      if(!exists){
        let imgTag = "";
        if(data.image){
          try {
            imgTag = `<img src="${await getDownloadURL(ref(storage, "news/" + data.image))}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¨Ø±">`;
          } catch(e) { console.log("Error loading image:", e); }
        }
        const card = document.createElement("div");
        card.className = "news-card";
        card.innerHTML = `${imgTag}<h3>${data.title}</h3>`;
        newsContainer.appendChild(card);
      }
    });
  });
});
</script>

</body>
</html>
